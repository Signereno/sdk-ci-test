language: csharp
solution: DoggoApp.sln
mono: none
dotnet: 2.1.300

install:
  - dotnet restore src/DoggoApp/
  
script:
  - dotnet build src/DoggoApp/
  - dotnet pack src/DoggoApp/ -c Release
  - dotnet pack src/DoggoApp/ -c Release --version-suffix ci-$TRAVIS_BUILD_NUMBER
  
deploy:
  skip_cleanup: true
  - provider: releases
    api_key: $GITHUB_OAUTH_TOKEN
    on:
      tags: true
- provider: script
  script: dotnet nuget push src/DoggoApp/bin/Release/DoggoApp.*ci-$TRAVIS_BUILD_NUMBER --api-key $MYGET_APIKEY --Source https://www.myget.org/F/identisign/api/v2/package 
  on:
    branch: master
